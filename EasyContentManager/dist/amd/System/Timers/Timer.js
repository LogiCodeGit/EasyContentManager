/*!
 * @author electricessence / https://github.com/electricessence/
 * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md
 */
define(["require","exports","../Observable/ObservableBase","../../extends"],function(t,e,n,i){"use strict";var o=i["default"],c=function(t){function e(e,n,i){if(void 0===n&&(n=1/0),void 0===i&&(i=e),t.call(this),this._interval=e,this._maxCount=n,this._initialDelay=i,this._count=0,null===e||void 0===e)throw"'interval' must be a valid number.";if(0>e)throw"'interval' cannot be negative."}return o(e,t),e.startNew=function(t,n,i){void 0===n&&(n=1/0),void 0===i&&(i=t);var o=new e(t,n,t);return o.start(),o},Object.defineProperty(e.prototype,"isRunning",{get:function(){return!!this._cancel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.start=function(){var t=this;if(!t._cancel&&t._count<t._maxCount)if(t._count||t._initialDelay==t._interval){var n=setInterval(e._onTick,t._interval,t);t._cancel=function(){clearInterval(n)}}else{var i=setTimeout(e._onTick,t._initialDelay,t,!0);t._cancel=function(){clearTimeout(i)}}},e.prototype.stop=function(){this.cancel()},e.prototype.reset=function(){this.stop(),this._count=0},e.prototype.cancel=function(){return this._cancel?(this._cancel(),this._cancel=null,!0):!1},e.prototype.dispose=function(){this.cancel(),t.prototype.dispose.call(this)},e._onTick=function(t,e){var n=t._count++,i=t._maxCount,o=t._count>=i;e&&(t.cancel(),t.start()),o&&t.stop(),i>n&&t._onNext(n),o&&t._onCompleted()},e}(n.ObservableBase);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=c});
//# sourceMappingURL=Timer.js.map
