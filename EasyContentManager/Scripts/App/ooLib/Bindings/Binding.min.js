var __extends=this&&this.__extends||function(t,n){function r(){this.constructor=t}for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)};define(["require","exports","ooLib/BaseObjects","js/jquery/jquery","js/angular/angular"],function(t,n,r){"use strict";var e;!function(t){var n=function(t){function n(n,r,e,i,o,a){t.call(this,e?e:"DataBinding:"+r),this._genBind=0,this._viewID=r;var d=this.identifyControl(n);if(!d)throw new Error("DataBinding.constructor(): invalid 'ctrlID' parameter for view container, must be valid jquery id, data model name (ng-model) or DOM element");var l=d.attr("ng-controller");l!=r&&(d.attr("ng-app",r),d.attr("ng-controller",r)),a||(a=document),this._ngModule=angular.module(r,i||[],o),angular.bootstrap(a,[r])}return __extends(n,t),n.prototype.addBind=function(t,n,r){if(!n||""==n)throw new Error("DataBinding.addBind(): missing or invalid data 'model' parameter, required for valid bind");var e=this.identifyControl(t);if(!e)throw new Error("DataBinding.addBind(): invalid 'ctrlID' parameter, must be valid jquery id, data model name (ng-model) or DOM element");return this._ngModule.controller(this._ngModule.name,function(t){var i,o=n.split("."),a=t;for(i in o)i==o.length-1?r&&(a[o[i]]=r):0==i&&(r?a[o[i]]=$.extend({},a[o[i]],r):a[o[i]]||(a[o[i]]={}));var d=e.attr("ng-model");d!=n&&(e.attr("ng-model",n),t.$watch(n,function(t,n){t!=n&&alert("Il nuovo valore Ã¨ "+t)})),this._lastBindScope=t}),n},n.prototype.identifyControl=function(t){var n,r;return"string"==$.type(t)?(r=t,"#"==t.charAt(0)&&(n=$(r))):n=t,n},n.prototype.refreshView=function(t){(t||this._lastBindScope).$apply(function(){})},n.prototype.refreshCtrl=function(t,n,r){var e=this.identifyControl(t).attr("ng-model");return e&&this.refreshValue(e,n,r),e},n.prototype.refreshValue=function(t,n,r){r||(r=this._lastBindScope),r.$apply(function(){r[t]=n||r[t]})},n}(r.BaseObjects.Binding);t.DataBinding=n}(e=n.Bindings||(n.Bindings={}))});